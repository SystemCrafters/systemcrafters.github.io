<!DOCTYPE html><html lang="en"><head>&lt;!--  --&gt;<meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="systemcrafters.net" src="https://plausible.io/js/plausible.js"></script><title>Declutter Your Emacs Buffers with Perspective.el - System Crafters</title></head><body>&lt;div&gt;&lt;div class=&quot;blog-header&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row align-items-center justify-content-between&quot;&gt;&lt;div class=&quot;col-sm-12 col-md-8&quot;&gt;&lt;div class=&quot;blog-title&quot;&gt;System Crafters&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;col-sm col-md&quot;&gt;&lt;div class=&quot;blog-description text-sm-left text-md-right text-lg-right text-xl-right&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;blog-masthead&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row align-items-center justify-content-between&quot;&gt;&lt;div class=&quot;col-sm-12 col-md-12&quot;&gt;&lt;nav class=&quot;nav&quot;&gt;&lt;a class=&quot;nav-link&quot; href=&quot;/&quot;&gt;Home&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;/videos&quot;&gt;Videos&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;https://wiki.systemcrafters.net&quot;&gt;Wiki&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;https://store.systemcrafters.net?utm_source=sc-site-nav&quot;&gt;Merch Store&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;/support-the-channel&quot;&gt;Support The Channel&lt;/a&gt;&lt;/nav&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">Declutter Your Emacs Buffers with Perspective.el</h1><p class="blog-post-meta"></p>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;https://youtu.be/uyMdDzjQFMU&quot;&gt;Watch the video&lt;/a&gt; on YouTube!
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;what-is-perspectiveel&quot; class=&quot;anchor&quot; href=&quot;#what-is-perspectiveel&quot;&gt;¶&lt;/a&gt;What is Perspective.el?&lt;/h2&gt;&lt;p&gt;There&apos;s a question I see pretty often in the &lt;a href=&quot;http://systemcrafters.chat&quot;&gt;System Crafters Discord&lt;/a&gt;:
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&quot;How do I get a buffer list for only the files or buffers I want to see?&quot;&lt;/strong&gt;
&lt;/p&gt;

&lt;p&gt;In Emacs, running &lt;kbd&gt;switch-to-buffer&lt;/kbd&gt; or &lt;kbd&gt;ibuffer&lt;/kbd&gt; shows you every single buffer that is open in Emacs which can be a little overwhelming in long-running Emacs sessions.
&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;perspective.el&lt;/strong&gt; package provides a convenient way to define individual &quot;perspectives&quot; for managing separate sets of buffers and windows.  You can think of perspectives like the &quot;workspace&quot; concept you see in some window managers.
&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/nex3/perspective-el&quot;&gt;https://github.com/nex3/perspective-el&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There are other alternatives to this package that have a different take on the workspace concept, we may cover them in future videos.
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;benefits-of-perspectiveel&quot; class=&quot;anchor&quot; href=&quot;#benefits-of-perspectiveel&quot;&gt;¶&lt;/a&gt;Benefits of perspective.el&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;Each perspective keeps its own buffer list and window layout&lt;/li&gt;
&lt;li&gt;Perspectives are attached to specific frames&lt;/li&gt;
&lt;li&gt;It works pretty seamlessly with EXWM if you use that too&lt;/li&gt;
&lt;li&gt;Provides functionality for saving perspectives to use in future sessions&lt;/li&gt;
&lt;li&gt;You can write Emacs Lisp code to automate perspective creation&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I&apos;ve been using perspective.el for a few months now and it has become an important part of my workflow!
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;basic-configuration&quot; class=&quot;anchor&quot; href=&quot;#basic-configuration&quot;&gt;¶&lt;/a&gt;Basic configuration&lt;/h2&gt;&lt;p&gt;If you use &lt;kbd&gt;use-package&lt;/kbd&gt; with &lt;kbd&gt;package.el&lt;/kbd&gt;, you can copy the following Emacs Lisp into your &lt;kbd&gt;init.el&lt;/kbd&gt; file and execute it for the first time with &lt;kbd&gt;C-M-x&lt;/kbd&gt;.
&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;emacs-lisp&quot;&gt;
(&lt;span class=&quot;org-keyword&quot;&gt;use-package&lt;/span&gt; &lt;span class=&quot;org-constant&quot;&gt;perspective&lt;/span&gt;
  &lt;span class=&quot;org-builtin&quot;&gt;:ensure&lt;/span&gt; t  &lt;span class=&quot;org-comment-delimiter&quot;&gt;; &lt;/span&gt;&lt;span class=&quot;org-comment&quot;&gt;use `:straight t` if using straight.el!&lt;/span&gt;
  &lt;span class=&quot;org-builtin&quot;&gt;:bind&lt;/span&gt; ((&lt;span class=&quot;org-string&quot;&gt;&quot;C-x k&quot;&lt;/span&gt; . persp-kill-buffer*))
  &lt;span class=&quot;org-builtin&quot;&gt;:init&lt;/span&gt;
  (persp-mode))

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will install the package and enable it immediately when Emacs starts up.
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt; By default the prefix for perspective.el bindings is &lt;kbd&gt;C-x x&lt;/kbd&gt; but you can change it by setting the variable &lt;kbd&gt;persp-mode-prefix-key&lt;/kbd&gt;.
&lt;/p&gt;

&lt;p&gt;We&apos;ll try out perspective.el in a basic Emacs configuration so that we can learn how to use it!
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;the-main-perspective&quot; class=&quot;anchor&quot; href=&quot;#the-main-perspective&quot;&gt;¶&lt;/a&gt;The &quot;main&quot; perspective&lt;/h2&gt;&lt;p&gt;By default, &lt;kbd&gt;perspective.el&lt;/kbd&gt; will create a perspective called &quot;main&quot; in every frame that Emacs creates.  In the very first frame, all of Emacs&apos; starting buffers will be in the &quot;main&quot; perspective of that frame.
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; When you create a new frame, a new &quot;main&quot; perspective will be created but it is &lt;strong&gt;NOT&lt;/strong&gt; the same as the &quot;main&quot; perspective in other frames!  They have the same name but they are actually different.
&lt;/p&gt;

&lt;p&gt;Whenever you open a file or some other buffer inside of a perspective, the buffer then becomes attached to that perspective and won&apos;t show up in other perspectives unless it is explicitly added to them.
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt; The name of the default perspective can be customized with the variable &lt;kbd&gt;persp-initial-frame-name&lt;/kbd&gt;.
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;listing-buffers-in-the-perspective&quot; class=&quot;anchor&quot; href=&quot;#listing-buffers-in-the-perspective&quot;&gt;¶&lt;/a&gt;Listing buffers in the perspective&lt;/h2&gt;&lt;p&gt;To list all buffers in the current perspective, use the normal &lt;kbd&gt;switch-to-buffer&lt;/kbd&gt; command!  This should work great with Emacs&apos; built-in completion systems, Helm, and Vertico.
&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;If you use Ivy, you might want to use &lt;kbd&gt;persp-ivy-switch-buffer&lt;/kbd&gt; or &lt;kbd&gt;persp-counsel-switch-buffer&lt;/kbd&gt; for better integration&lt;/li&gt;
&lt;li&gt;If you use Selectrum, you might want &lt;kbd&gt;persp-switch-to-buffer*&lt;/kbd&gt; for better integration&lt;/li&gt;
&lt;li&gt;If you prefer an &lt;kbd&gt;ibuffer&lt;/kbd&gt;-style interface you can use &lt;kbd&gt;persp-ibuffer&lt;/kbd&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can also choose from all open buffers and automatically switch to the perspective that &quot;owns&quot; the buffer with &lt;kbd&gt;persp-switch-to-buffer&lt;/kbd&gt; (&lt;kbd&gt;C-x x b&lt;/kbd&gt;).
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;creating-a-perspective&quot; class=&quot;anchor&quot; href=&quot;#creating-a-perspective&quot;&gt;¶&lt;/a&gt;Creating a perspective&lt;/h2&gt;&lt;p&gt;Having only one perspective isn&apos;t very useful, though, so let&apos;s create another!
&lt;/p&gt;

&lt;p&gt;The &lt;kbd&gt;persp-switch&lt;/kbd&gt; command (&lt;kbd&gt;C-x x s&lt;/kbd&gt;) will prompt you for the name of a perspective to switch to.  If you enter a name for a perspective that doesn&apos;t exist yet, it will be created.
&lt;/p&gt;

&lt;p&gt;We can now list the buffers of this new perspective using &lt;kbd&gt;switch-to-buffer&lt;/kbd&gt; or any of the commands mentioned before.
&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt; All perspectives get their own &lt;kbd&gt;*scratch*&lt;/kbd&gt; buffer!  This can be useful for keeping temporary notes within a specific workspace.
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;switching-perspectives&quot; class=&quot;anchor&quot; href=&quot;#switching-perspectives&quot;&gt;¶&lt;/a&gt;Switching perspectives&lt;/h2&gt;&lt;p&gt;You can select from a list of all perspectives for the current frame using the &lt;kbd&gt;persp-switch&lt;/kbd&gt; command (&lt;kbd&gt;C-x x s&lt;/kbd&gt;).
&lt;/p&gt;

&lt;p&gt;There are also a couple of helpful commands for cycling between perspectives:
&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;persp-next&lt;/kbd&gt; (&lt;kbd&gt;C-x x n&lt;/kbd&gt; or &lt;kbd&gt;C-x x &amp;lt;right&amp;gt;&lt;/kbd&gt;): switch to the next perspective&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;persp-prev&lt;/kbd&gt; (&lt;kbd&gt;C-x x p&lt;/kbd&gt; or &lt;kbd&gt;C-x x &amp;lt;left&amp;gt;&lt;/kbd&gt;): switch to the previous perspective&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is a good time to point out that the list of perspectives for the current frame are displayed in the mode line!
&lt;/p&gt;

&lt;p&gt;You can also select between perspectives using the number row keys with &lt;kbd&gt;C-x x 1&lt;/kbd&gt; through &lt;kbd&gt;C-x x 0&lt;/kbd&gt; (10).
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;adding-an-existing-buffer-to-a-perspective&quot; class=&quot;anchor&quot; href=&quot;#adding-an-existing-buffer-to-a-perspective&quot;&gt;¶&lt;/a&gt;Adding an existing buffer to a perspective&lt;/h2&gt;&lt;p&gt;Sometimes you&apos;ll end up in this situation: you open a file in a perspective and then realize that you should have opened it in a more appropriate perspective.
&lt;/p&gt;

&lt;p&gt;There are a few ways to get that buffer into the desired perspective:
&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;persp-add-buffer&lt;/kbd&gt; (&lt;kbd&gt;C-x x a&lt;/kbd&gt;) will prompt you for the buffer to add to the &lt;strong&gt;current&lt;/strong&gt; perspective (but it won&apos;t switch to that buffer)&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;persp-set-buffer&lt;/kbd&gt; (&lt;kbd&gt;C-x x A&lt;/kbd&gt;) will prompt for a buffer to move to the current perspective and remove from all others!&lt;/li&gt;
&lt;li&gt;Use the universal argument key &lt;kbd&gt;C-u&lt;/kbd&gt; before running &lt;kbd&gt;switch-to-buffer&lt;/kbd&gt; and select the desired buffer&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;&lt;a id=&quot;removing-a-buffer-from-a-perspective&quot; class=&quot;anchor&quot; href=&quot;#removing-a-buffer-from-a-perspective&quot;&gt;¶&lt;/a&gt;Removing a buffer from a perspective&lt;/h2&gt;&lt;p&gt;If you want to remove a buffer from a perspective, you can use the &lt;kbd&gt;persp-remove&lt;/kbd&gt; (&lt;kbd&gt;C-x x k&lt;/kbd&gt;) command.  Once you select a buffer, it will only be removed from the current perspective.
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;killing-perspectives&quot; class=&quot;anchor&quot; href=&quot;#killing-perspectives&quot;&gt;¶&lt;/a&gt;Killing perspectives&lt;/h2&gt;&lt;p&gt;If you&apos;re done with a particular perspective, you can &quot;kill&quot; it using &lt;kbd&gt;persp-kill&lt;/kbd&gt; (&lt;kbd&gt;C-x x c&lt;/kbd&gt;).
&lt;/p&gt;

&lt;p&gt;The documentation for &lt;kbd&gt;persp-kill&lt;/kbd&gt; says that only buffers associated with the killed perspective and no others will be killed.  That hasn&apos;t been true in my experience, they all seem to remain active, just not visible in other perspectives!
&lt;/p&gt;

&lt;p&gt;In a very recent commit a new command named &lt;kbd&gt;persp-kill-others&lt;/kbd&gt; was added for quickly killing all perspectives in the frame except the current one.
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;whats-next&quot; class=&quot;anchor&quot; href=&quot;#whats-next&quot;&gt;¶&lt;/a&gt;What&apos;s next?&lt;/h2&gt;&lt;p&gt;That was just a brief overview of the &lt;kbd&gt;perspective.el&lt;/kbd&gt; package to get you started!  In future videos we&apos;ll cover more ways to customize the your perspective workflow and also how to integrate it with EXWM and Projectile!
&lt;/p&gt;
&lt;/div&gt;</div></div></div></div>&lt;footer class=&quot;blog-footer&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row&quot;&gt;&lt;div class=&quot;col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right&quot;&gt;&lt;p&gt;Made with Emacs 27.2 (Org mode 9.4.4)&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://systemcrafters.net/privacy-policy/&quot;&gt;Privacy Policy&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/footer&gt;&lt;script src=&quot;/js/bootstrap.bundle.min.js&quot;/&gt;</body></html>
