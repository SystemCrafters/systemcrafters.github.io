<!DOCTYPE html><html lang="en"><head><!--  --><meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><title>Streamline Your Emacs Completions with Vertico - System Crafters</title></head><body><div><div class="blog-header"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-8"><div class="blog-title">System Crafters</div></div><div class="col-sm col-md"><div class="blog-description text-sm-left text-md-right text-lg-right text-xl-right"></div></div></div></div></div><div class="blog-masthead"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-12"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/videos">Videos</a><a class="nav-link" href="https://wiki.systemcrafters.cc">Wiki</a> <a class="nav-link" href="/support-the-channel">Support The Channel</a></nav></div></div></div></div></div><div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">Streamline Your Emacs Completions with Vertico</h1><p class="blog-post-meta"></p><div><p><a href="https://youtu.be/J0OaRy85MOo">Watch the video</a> on YouTube!
</p>

<h2><a id="completions-in-emacs" class="anchor" href="#completions-in-emacs">¶</a>Completions in Emacs</h2><p>In Emacs, one of the most important features of the user interface is the way in which the user makes selections from lists of items.  For example:
</p>

<ul><li>Opening files</li>
<li>Switching buffers</li>
<li>Using <kbd>M-x</kbd> to execute commands</li>
</ul>

<p>There are a few built-in packages (ido, icomplete, etc) which provide different ways of displaying selections, but in my opinion most of them aren't very attractive.
</p>

<p>These days, many people use completion "frameworks" like Helm or Ivy which provide enhanced interfaces and special commands that provide a lot of additional behavior.
</p>

<p>But what if you don't use or want all of that extra functionality?  This is where a new breed of completion interfaces come in, providing a more minimal and componentized ecosystem of packages that allow you to build your own completion framework with only the parts you care about.
</p>

<p>I've been using Vertico for this purpose recently and I really like it!
</p>

<h2><a id="what-is-vertico" class="anchor" href="#what-is-vertico">¶</a>What is Vertico?</h2><p>Vertico is a relatively new Emacs package which provides a streamlined interface for minibuffer completions which doesn't include any of the other cruft that comes along with the more heavy-weight third party options.
</p>

<p>One important feature is that it plugs in directly to Emacs' own completion engine unlike Helm and Ivy which have their own layer on top.  This enables all existing completion commands in Emacs to use Vertico's UI with no extra configuration!
</p>

<p>Read more at the GitHub repository: <a href="https://github.com/minad/vertico">https://github.com/minad/vertico</a>
</p>

<h2><a id="setting-it-up" class="anchor" href="#setting-it-up">¶</a>Setting it up</h2><p>Getting started with Vertico is very easy!  It's on <a href="http://elpa.gnu.org/packages/vertico.html">GNU ELPA</a> so you can install it easily with <kbd>package.el</kbd> and <kbd>use-package</kbd>:
</p>

<pre><code class="emacs-lisp">
(<span class="org-keyword">use-package</span> <span class="org-constant">vertico</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:init</span>
  (vertico-mode))

</code></pre>

<p>Once you run <kbd>vertico-mode</kbd>, all completions will now use Vertico's completion UI!
</p>

<p>Try these out:
</p>

<ul><li><kbd>find-file</kbd></li>
<li><kbd>switch-to-buffer</kbd></li>
<li><kbd>describe-function</kbd></li>
<li><kbd>M-x</kbd></li>
</ul>

<h2><a id="improving-the-configuration" class="anchor" href="#improving-the-configuration">¶</a>Improving the configuration</h2><p>Now that we've got the basic completion UI set up, let's polish it a bit.  The following configuration will add a few improvements:
</p>

<ul><li>Additional key bindings for users that like Vim-style movement keys</li>
<li>Cycling selections when you reach the beginning/end of the list</li>
<li>Saving completion history, Vertico will sort items based on history!</li>
<li>Adding extra metadata for completions in the margins using <a href="https://github.com/minad/marginalia">Marginalia</a></li>
</ul>

<pre><code class="emacs-lisp">
(<span class="org-keyword">use-package</span> <span class="org-constant">vertico</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span> (<span class="org-builtin">:map</span> vertico-map
         (<span class="org-string">"C-j"</span> . vertico-next)
         (<span class="org-string">"C-k"</span> . vertico-previous)
         (<span class="org-string">"C-f"</span> . vertico-exit)
         <span class="org-builtin">:map</span> minibuffer-local-map
         (<span class="org-string">"M-h"</span> . backward-kill-word))
  <span class="org-builtin">:custom</span>
  (vertico-cycle t)
  <span class="org-builtin">:init</span>
  (vertico-mode))

(<span class="org-keyword">use-package</span> <span class="org-constant">savehist</span>
  <span class="org-builtin">:init</span>
  (savehist-mode))

(<span class="org-keyword">use-package</span> <span class="org-constant">marginalia</span>
  <span class="org-builtin">:after</span> vertico
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:custom</span>
  (marginalia-annotators '(marginalia-annotators-heavy marginalia-annotators-light nil))
  <span class="org-builtin">:init</span>
  (marginalia-mode))

</code></pre>

<h2><a id="any-downsides" class="anchor" href="#any-downsides">¶</a>Any downsides?</h2><p>At the moment there are a small number of downsides to using Vertico:
</p>

<ul><li>You have to do a little more work to configure something that provides similar features to Ivy or Helm (but that's the point!)</li>
<li>It's still fairly early in development so there can be bugs, but the author is very responsive!</li>
<li>Performance for completions in TRAMP sessions is poor</li>
</ul>

<h2><a id="other-useful-packages" class="anchor" href="#other-useful-packages">¶</a>Other useful packages</h2><ul><li><a href="https://github.com/minad/consult">Consult</a>: A collection of commands (like Counsel for Ivy) which provide additional completions</li>
<li><a href="https://github.com/oantolin/embark">Embark</a>: Provides actions for the current selection in Vertico completion lists</li>
<li><a href="https://github.com/oantolin/orderless">Orderless</a>: Improves searching across completions</li>
<li><a href="https://github.com/raxod502/selectrum">Selectrum</a>: An alternative to Vertico, less minimal but follows similar principles</li>
</ul>

<p>We'll cover all of these in future videos!
</p>
</div></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right"><p>Made with Emacs 27.2 (Org mode 9.4.4)</p></div></div></div></footer><script src="/js/bootstrap.bundle.min.js"/></body></html>
