<!--  -->
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="systemcrafters.net" src="https://plausible.io/js/plausible.js"></script><title>System Crafters Live! - August 26, 2022 - System Crafters</title></head><body><div class="blog-header"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-8"><div class="blog-title">System Crafters</div></div><div class="col-sm col-md"><div class="blog-description text-sm-left text-md-right text-lg-right text-xl-right"></div></div></div></div></div><div class="blog-masthead"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-12"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/videos">Videos</a> <a class="nav-link" href="https://wiki.systemcrafters.net">Wiki</a> <a class="nav-link" href="https://store.systemcrafters.net?utm_source=sc-site-nav">Merch Store</a> <a class="nav-link" href="/support-the-channel">Support The Channel</a></nav></div></div></div></div><div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">System Crafters Live! - August 26, 2022</h1><p class="blog-post-meta"></p><div><p><div class="embed-responsive embed-responsive-16by9"> <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/dCmyMCfmUhQ" allowfullscreen></iframe> </div>
</p>

<h2><a id="updates" class="anchor" href="#updates">¶</a>Updates</h2><ul><li>Support the channel!  <strong>Buy Mastering Emacs</strong> with this link <a href="https://www.masteringemacs.org/r/systemcrafters">https://www.masteringemacs.org/r/systemcrafters</a></li>
</ul>

<h2><a id="object-oriented-emacs-lisp-with-eieio" class="anchor" href="#object-oriented-emacs-lisp-with-eieio">¶</a>Object-Oriented Emacs Lisp with EIEIO</h2><p>Today we're going to look at the EIEIO library that comes built in to Emacs.  This library looks really useful if you want to write more sophisticated code in Emacs Lisp because it enables you to add new types to Emacs with type inheritance, dynamic method dispatch, and a whole lot more.
</p>

<p>It is based on the <a href="https://en.wikipedia.org/wiki/Common_Lisp_Object_System">Common Lisp Object System</a> which is a pretty influential object-oriented programming implementation.  A classic book called <a href="https://amzn.to/3R5q1Mw">The Art of the Metaobject Protocol</a> is said to be a really good source for learning more about it.
</p>

<p>You can read the manual online or by running <kbd>(info "EIEIO")</kbd> in Emacs:
</p>

<p><a href="https://www.gnu.org/software/emacs/manual/html_mono/eieio.html">https://www.gnu.org/software/emacs/manual/html_mono/eieio.html</a>
</p>

<p>I haven't used EIEIO before but I have read a bit about CLOS, so we're going to learn about it together today!
</p>

<p><strong>NOTE:</strong> I was working through this block of code live so it's possible that you won't be able to execute it directly!  Try running pieces of it separately if it gives you any errors.
</p>

<pre><code class="emacs-lisp">
(<span class="org-keyword">defclass</span> <span class="org-type">person</span> ()
  ((name <span class="org-builtin">:initarg</span> <span class="org-builtin">:name</span>
         <span class="org-builtin">:initform</span> <span class="org-string">""</span>
         <span class="org-builtin">:type</span> string
         <span class="org-builtin">:custom</span> string
         <span class="org-builtin">:documentation</span> <span class="org-doc">"The name of a person."</span>)
   (birthday <span class="org-builtin">:initarg</span> <span class="org-builtin">:birthday</span>
             <span class="org-builtin">:initform</span> <span class="org-string">"Jan 1, 1970"</span>
             <span class="org-builtin">:custom</span> string
             <span class="org-builtin">:type</span> string
             <span class="org-builtin">:documentation</span> <span class="org-doc">"The person's birthday."</span>)
   (phone <span class="org-builtin">:initarg</span> <span class="org-builtin">:phone</span>
          <span class="org-builtin">:initform</span> <span class="org-string">""</span>
          <span class="org-builtin">:documentation</span> <span class="org-doc">"Phone number."</span>))
  <span class="org-doc">"A class for tracking people I know."</span>)

(<span class="org-keyword">defclass</span> <span class="org-type">employee</span> (person)
  ((company <span class="org-builtin">:initarg</span> <span class="org-builtin">:company</span>
            <span class="org-builtin">:initform</span> <span class="org-string">""</span>
            <span class="org-builtin">:type</span> string
            <span class="org-builtin">:custom</span> string
            <span class="org-builtin">:documentation</span> <span class="org-doc">"The company the person works for."</span>)
   (manager <span class="org-builtin">:initarg</span> <span class="org-builtin">:manager</span>
            <span class="org-builtin">:initform</span> <span class="org-string">""</span>
            <span class="org-builtin">:type</span> string
            <span class="org-builtin">:custom</span> string
            <span class="org-builtin">:documentation</span> <span class="org-doc">"The person who can fire me."</span>))
  <span class="org-doc">"A class for tracking my wage slave details."</span>)

(<span class="org-keyword">defclass</span> <span class="org-type">android</span> ()
  ((name <span class="org-builtin">:initarg</span> <span class="org-builtin">:name</span>
         <span class="org-builtin">:initform</span> <span class="org-string">""</span>
         <span class="org-builtin">:type</span> string
         <span class="org-builtin">:custom</span> string
         <span class="org-builtin">:documentation</span> <span class="org-doc">"The name of a person."</span>)))

(<span class="org-keyword">setq</span> test-person (employee <span class="org-builtin">:name</span> <span class="org-string">"David"</span>
                            <span class="org-builtin">:birthday</span> <span class="org-string">"Jan 1, 1970"</span>
                            <span class="org-builtin">:phone</span> <span class="org-string">"867-5309"</span>
                            <span class="org-builtin">:company</span> <span class="org-string">"Acme Inc"</span>
                            <span class="org-builtin">:manager</span> <span class="org-string">"Bob Bobbob"</span>))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> (pers <span class="org-type">&amp;optional</span> scriptname)
  <span class="org-doc">"Dial the phone for the person PERS.</span>
<span class="org-doc">   Execute the program SCRIPTNAME to dial the phone."</span>
  (message <span class="org-string">"Can't call %S!"</span> pers))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> <span class="org-builtin">:after</span> (pers)
  (message <span class="org-string">"I tried to call!"</span> pers))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> <span class="org-builtin">:after</span> ((pers person))
  (message <span class="org-string">"I called a person!"</span> pers))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> ((pers person) <span class="org-type">&amp;optional</span> scriptname)
  <span class="org-doc">"Dial the phone for the person PERS.</span>
<span class="org-doc">   Execute the program SCRIPTNAME to dial the phone."</span>
  (message <span class="org-string">"Dialing the phone for %s"</span> (slot-value pers 'name)))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> ((emp employee))
  <span class="org-doc">"Dial the phone for the employee EMP."</span>
  (message <span class="org-string">"Dialing the phone for EMPLOYEE %s"</span> (slot-value emp 'name)))

(<span class="org-keyword">cl-defmethod</span> <span class="org-function-name">call-person</span> ((andr android))
  <span class="org-doc">"Dial the phone for the employee EMP."</span>
  (message <span class="org-string">"Dialing the phone for ANDROID %s"</span> (slot-value andr 'name)))

</code></pre>

<p>You can use the <kbd>M-x eieio-browse</kbd> command to look at all classes presently defined in Emacs.
</p>

<p>If you want to try CLOS in Guile Scheme, try GOOPS: <a href="https://www.gnu.org/software/guile/manual/html_node/GOOPS.html">https://www.gnu.org/software/guile/manual/html_node/GOOPS.html</a>
</p>
</div></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right"><p>Made with Emacs 27.2 (Org mode 9.4.4)</p><p><a href="https://systemcrafters.net/privacy-policy/">Privacy Policy</a></p></div></div></div></footer><script src="/js/bootstrap.bundle.min.js"/></body></html>
