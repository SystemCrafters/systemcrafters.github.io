<!DOCTYPE html><html lang="en"><head><!--  --><meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="systemcrafters.net" src="https://plausible.io/js/plausible.js"></script><title>System Crafters Live! - October 15, 2021 - System Crafters</title></head><body><div><div class="blog-header"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-8"><div class="blog-title">System Crafters</div></div><div class="col-sm col-md"><div class="blog-description text-sm-left text-md-right text-lg-right text-xl-right"></div></div></div></div></div><div class="blog-masthead"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-12"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/videos">Videos</a> <a class="nav-link" href="https://wiki.systemcrafters.net">Wiki</a> <a class="nav-link" href="https://store.systemcrafters.net?utm_source=sc-site-nav">Merch Store</a> <a class="nav-link" href="/support-the-channel">Support The Channel</a></nav></div></div></div></div></div><div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">System Crafters Live! - October 15, 2021</h1><p class="blog-post-meta"></p><div><p><a href="https://youtu.be/qk2Is_sC8Lk">Watch the recording</a> on YouTube!
</p>

<h2><a id="updates" class="anchor" href="#updates">¶</a>Updates</h2><ul><li>This week's video</li>
<li>I've started <a href="https://github.com/daviwil/dotfiles/tree/guix-home/daviwil">converting my dotfiles</a> to use <kbd>guix home</kbd></li>
<li>I might be taking 2 weeks off starting next week!</li>
</ul>

<h2><a id="the-many-uses-of-embark" class="anchor" href="#the-many-uses-of-embark">¶</a>The Many Uses of Embark</h2><p>Embark is a package that enables you to define context-specific actions and key bindings for different "targets" that you might encounter in Emacs:
</p>

<ul><li>Files</li>
<li>Buffers</li>
<li>Packages</li>
<li>Bookmarks</li>
<li>URLs</li>
<li>Identifiers (symbols, commands, variables)</li>
<li>Selected Regions</li>
</ul>

<p>See the <a href="https://github.com/oantolin/embark/wiki/Default-Actions">Default Actions</a> wiki page and the variable <kbd>embark-keymap-alist</kbd> for a list of the default targets.
</p>

<p>Embark can be used for a variety of different tasks:
</p>

<ul><li>A "context menu"</li>
<li>A command "retargeter"</li>
<li>A quick-action key for the thing at point</li>
<li>A way to gather completions for further actions</li>
<li>A way to switch the current minibuffer command</li>
<li>A <kbd>which-key</kbd> alternative</li>
<li>A completion interface</li>
</ul>

<p>If you've switched from Helm or Ivy to Vertico or Selectrum, Embark gives you the ability to run actions on the current completion selection, but I'd argue that Embark is a lot more versatile than that.
</p>

<p>We'll be taking a look at a few sources today for ideas on how you can use Embark in your Emacs workflow:
</p>

<ul><li>Embark README: <a href="https://github.com/oantolin/embark">https://github.com/oantolin/embark</a></li>
<li>Karthik's great blog post:  <a href="https://karthinks.com/software/fifteen-ways-to-use-embark/">https://karthinks.com/software/fifteen-ways-to-use-embark/</a></li>
<li><a href="https://github.com/oantolin/embark/wiki/Additional-Actions">https://github.com/oantolin/embark/wiki/Additional-Actions</a></li>
<li><a href="https://github.com/oantolin/embark/wiki/Additional-Configuration">https://github.com/oantolin/embark/wiki/Additional-Configuration</a></li>
<li>Prot's Embark video: <a href="https://www.youtube.com/watch?v=uoP9ZYdNCHg">https://www.youtube.com/watch?v=uoP9ZYdNCHg</a></li>
</ul>

<p><strong>Starting Configuration</strong>
</p>

<pre><code class="emacs-lisp">
(<span class="org-keyword">use-package</span> <span class="org-constant">embark</span>
  <span class="org-builtin">:ensure</span> t
  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-."</span> . embark-act)
   (<span class="org-string">"M-."</span> . embark-dwim)
   (<span class="org-string">"C-h B"</span> . embark-bindings))

  <span class="org-builtin">:init</span>
  (<span class="org-keyword">setq</span> prefix-help-command #'embark-prefix-help-command))

</code></pre>

<h3><a id="questions" class="anchor" href="#questions">¶</a>Questions</h3><ul><li>How does one use <kbd>embark-collect-live</kbd> as a completion system?</li>
<li>How can you customize the default action for <kbd>embark-dwim</kbd>?</li>
</ul>

<h3><a id="the-final-configuration" class="anchor" href="#the-final-configuration">¶</a>The "final" configuration</h3><p>Here's a transcript of the configuration I was experimenting with in the stream:
</p>

<pre><code class="emacs-lisp">
(<span class="org-keyword">use-package</span> <span class="org-constant">embark</span>
  <span class="org-builtin">:straight</span> t
  <span class="org-builtin">:bind</span>
  ((<span class="org-string">"C-."</span> . embark-act)
   (<span class="org-string">"M-."</span> . embark-dwim)
   (<span class="org-string">"C-h B"</span> . embark-bindings))
  <span class="org-builtin">:init</span>
  (<span class="org-keyword">setq</span> prefix-help-command #'embark-prefix-help-command))

(<span class="org-keyword">use-package</span> <span class="org-constant">embark-consult</span>
  <span class="org-builtin">:straight</span> t)

(<span class="org-keyword">use-package</span> <span class="org-constant">ace-window</span>
  <span class="org-builtin">:straight</span> t)

(global-set-key (kbd <span class="org-string">"M-o"</span>) 'ace-window)
(<span class="org-keyword">setq</span> aw-dispatch-always t)

(<span class="org-keyword">use-package</span> <span class="org-constant">0x0</span>
  <span class="org-builtin">:straight</span> t)

(define-key embark-region-map (kbd <span class="org-string">"U"</span>) '0x0-dwim)

(<span class="org-keyword">defun</span> <span class="org-function-name">my/test-func</span> ()
  (message <span class="org-string">"~/init.el"</span>))

(<span class="org-keyword">eval-when-compile</span>
  (<span class="org-keyword">defmacro</span> <span class="org-function-name">my/embark-ace-action</span> (fn)
    `(<span class="org-keyword">defun</span> ,(intern (concat <span class="org-string">"my/embark-ace-"</span> (symbol-name fn))) ()
       (<span class="org-keyword">interactive</span>)
       (<span class="org-keyword">with-demoted-errors</span> <span class="org-string">"%s"</span>
         (<span class="org-keyword">require</span> '<span class="org-constant">ace-window</span>)
         (aw-switch-to-window (aw-select nil))
         (call-interactively (symbol-function ',fn)))))

  (<span class="org-keyword">defmacro</span> <span class="org-function-name">my/embark-split-action</span> (fn split-type)
    `(<span class="org-keyword">defun</span> ,(intern (concat <span class="org-string">"my/embark-"</span>
                             (symbol-name fn)
                             <span class="org-string">"-"</span>
                             (car (last  (split-string
                                          (symbol-name split-type) <span class="org-string">"-"</span>))))) <span class="org-warning">()</span>
       (<span class="org-keyword">interactive</span>)
       (funcall #',split-type)
       (call-interactively #',fn))))

(define-key embark-file-map     (kbd <span class="org-string">"o"</span>) (my/embark-ace-action find-file))
(define-key embark-buffer-map   (kbd <span class="org-string">"o"</span>) (my/embark-ace-action switch-to-buffer))
(define-key embark-bookmark-map (kbd <span class="org-string">"o"</span>) (my/embark-ace-action bookmark-jump))

(define-key embark-file-map     (kbd <span class="org-string">"2"</span>) (my/embark-split-action find-file split-window-below))
(define-key embark-buffer-map   (kbd <span class="org-string">"2"</span>) (my/embark-split-action switch-to-buffer split-window-below))
(define-key embark-bookmark-map (kbd <span class="org-string">"2"</span>) (my/embark-split-action bookmark-jump split-window-below))

(define-key embark-file-map     (kbd <span class="org-string">"3"</span>) (my/embark-split-action find-file split-window-right))
(define-key embark-buffer-map   (kbd <span class="org-string">"3"</span>) (my/embark-split-action switch-to-buffer split-window-right))
(define-key embark-bookmark-map (kbd <span class="org-string">"3"</span>) (my/embark-split-action bookmark-jump split-window-right))

</code></pre>
</div></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right"><p>Made with Emacs 27.2 (Org mode 9.4.4)</p><p><a href="https://systemcrafters.net/privacy-policy/">Privacy Policy</a></p></div></div></div></footer><script src="/js/bootstrap.bundle.min.js"/></body></html>
