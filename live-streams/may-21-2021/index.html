<!DOCTYPE html><html lang="en"><head>&lt;!--  --&gt;<meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="systemcrafters.net" src="https://plausible.io/js/plausible.js"></script><title>System Crafters Live! - May 21, 2021 - System Crafters</title></head><body>&lt;div&gt;&lt;div class=&quot;blog-header&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row align-items-center justify-content-between&quot;&gt;&lt;div class=&quot;col-sm-12 col-md-8&quot;&gt;&lt;div class=&quot;blog-title&quot;&gt;System Crafters&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;col-sm col-md&quot;&gt;&lt;div class=&quot;blog-description text-sm-left text-md-right text-lg-right text-xl-right&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;blog-masthead&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row align-items-center justify-content-between&quot;&gt;&lt;div class=&quot;col-sm-12 col-md-12&quot;&gt;&lt;nav class=&quot;nav&quot;&gt;&lt;a class=&quot;nav-link&quot; href=&quot;/&quot;&gt;Home&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;/videos&quot;&gt;Videos&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;https://wiki.systemcrafters.net&quot;&gt;Wiki&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;https://store.systemcrafters.net?utm_source=sc-site-nav&quot;&gt;Merch Store&lt;/a&gt; &lt;a class=&quot;nav-link&quot; href=&quot;/support-the-channel&quot;&gt;Support The Channel&lt;/a&gt;&lt;/nav&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">System Crafters Live! - May 21, 2021</h1><p class="blog-post-meta"></p>&lt;div&gt;&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=UtqE-lR2HCA&quot;&gt;Watch the recording&lt;/a&gt; on YouTube!
&lt;/p&gt;

&lt;h2&gt;&lt;a id=&quot;replacing-ivy-and-counsel-with-vertico-and-consult&quot; class=&quot;anchor&quot; href=&quot;#replacing-ivy-and-counsel-with-vertico-and-consult&quot;&gt;¶&lt;/a&gt;Replacing Ivy and Counsel with Vertico and Consult&lt;/h2&gt;&lt;p&gt;If you tried out Vertico after the video on Monday, you probably wondered how you can get back to the level of functionality you had with Ivy.
&lt;/p&gt;

&lt;p&gt;Today we&apos;re going to survey the set of commands that come with the Consult package to figure out which will be useful for the transition away from Ivy.
&lt;/p&gt;

&lt;p&gt;I&apos;ll be making a video on this soon, but today we&apos;ll be figuring it out together!
&lt;/p&gt;

&lt;h3&gt;&lt;a id=&quot;mapping-ivyswipercounsel-to-consult&quot; class=&quot;anchor&quot; href=&quot;#mapping-ivyswipercounsel-to-consult&quot;&gt;¶&lt;/a&gt;Mapping Ivy/Swiper/Counsel to Consult&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;swiper&lt;/kbd&gt; -&amp;gt; &lt;kbd&gt;consult-line&lt;/kbd&gt;&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;counsel-rg&lt;/kbd&gt; -&amp;gt; &lt;kbd&gt;consult-ripgrep&lt;/kbd&gt;&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;counsel-switch-buffer&lt;/kbd&gt; -&amp;gt; &lt;kbd&gt;consult-buffer&lt;/kbd&gt;.  Annotations are better for &lt;kbd&gt;switch-to-buffer&lt;/kbd&gt;?&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;counsel-org-goto&lt;/kbd&gt; -&amp;gt; &lt;kbd&gt;consult-imenu&lt;/kbd&gt; or &lt;kbd&gt;consult-org-heading&lt;/kbd&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;TIP:&lt;/strong&gt; You should set &lt;kbd&gt;consult-project-root-function&lt;/kbd&gt; to something like this if you use Projectile:
&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;emacs-lisp&quot;&gt;
(&lt;span class=&quot;org-keyword&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;org-function-name&quot;&gt;dw/get-project-root&lt;/span&gt; ()
  (&lt;span class=&quot;org-keyword&quot;&gt;when&lt;/span&gt; (fboundp &apos;projectile-project-root)
    (projectile-project-root)))

&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;&lt;a id=&quot;other-useful-commands&quot; class=&quot;anchor&quot; href=&quot;#other-useful-commands&quot;&gt;¶&lt;/a&gt;Other useful commands&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;kbd&gt;consult-mark&lt;/kbd&gt;: Show a list of previous mark locations&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-outline&lt;/kbd&gt;: Show a list of headings in the current file depending on type&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-minor-mode-menu&lt;/kbd&gt;: Show a list of all minor modes, press &lt;kbd&gt;i SPC&lt;/kbd&gt; to narrow to active modes&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-history&lt;/kbd&gt;: History for current minibuffer, also works for terminal modes&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-file-externally&lt;/kbd&gt;: Open a file in an external program&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-preview-mode&lt;/kbd&gt;: Preview selections for various commands&lt;/li&gt;
&lt;li&gt;&lt;kbd&gt;consult-completion-in-region&lt;/kbd&gt;: Can be used with the &lt;kbd&gt;completion-in-region-function&lt;/kbd&gt; variable to do in-buffer completions using Vertico&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;a id=&quot;going-up-a-directory-in-kbdfind-filekbd&quot; class=&quot;anchor&quot; href=&quot;#going-up-a-directory-in-kbdfind-filekbd&quot;&gt;¶&lt;/a&gt;Going up a directory in &lt;kbd&gt;find-file&lt;/kbd&gt;&lt;/h3&gt;&lt;p&gt;One bit of functionality I got used to in Ivy was how the &lt;kbd&gt;counsel-find-file&lt;/kbd&gt; command would go up a directory whenever I pressed Backspace.  Here&apos;s how to replicate it in Vertico!
&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;emacs-lisp&quot;&gt;
(&lt;span class=&quot;org-keyword&quot;&gt;defun&lt;/span&gt; &lt;span class=&quot;org-function-name&quot;&gt;dw/minibuffer-backward-kill&lt;/span&gt; (arg)
  &lt;span class=&quot;org-doc&quot;&gt;&quot;When minibuffer is completing a file name delete up to parent&lt;/span&gt;
&lt;span class=&quot;org-doc&quot;&gt;folder, otherwise delete a character backward&quot;&lt;/span&gt;
  (&lt;span class=&quot;org-keyword&quot;&gt;interactive&lt;/span&gt; &lt;span class=&quot;org-string&quot;&gt;&quot;p&quot;&lt;/span&gt;)
  (&lt;span class=&quot;org-keyword&quot;&gt;if&lt;/span&gt; minibuffer-completing-file-name
      &lt;span class=&quot;org-comment-delimiter&quot;&gt;;; &lt;/span&gt;&lt;span class=&quot;org-comment&quot;&gt;Borrowed from https://github.com/raxod502/selectrum/issues/498#issuecomment-803283608&lt;/span&gt;
      (&lt;span class=&quot;org-keyword&quot;&gt;if&lt;/span&gt; (string-match-p &lt;span class=&quot;org-string&quot;&gt;&quot;/.&quot;&lt;/span&gt; (minibuffer-contents))
          (zap-up-to-char (- arg) ?/)
        (delete-minibuffer-contents))
      (delete-backward-char arg)))

&lt;span class=&quot;org-comment-delimiter&quot;&gt;;; &lt;/span&gt;&lt;span class=&quot;org-comment&quot;&gt;This is not a full config, just an example of the :bind!&lt;/span&gt;
(&lt;span class=&quot;org-keyword&quot;&gt;use-package&lt;/span&gt; &lt;span class=&quot;org-constant&quot;&gt;vertico&lt;/span&gt;
  &lt;span class=&quot;org-builtin&quot;&gt;:bind&lt;/span&gt; (&lt;span class=&quot;org-builtin&quot;&gt;:map&lt;/span&gt; minibuffer-local-map
         (&lt;span class=&quot;org-string&quot;&gt;&quot;&amp;lt;backspace&amp;gt;&quot;&lt;/span&gt; . dw/minibuffer-backward-kill)))

&lt;/code&gt;&lt;/pre&gt;

&lt;h3&gt;&lt;a id=&quot;other-consult-packages&quot; class=&quot;anchor&quot; href=&quot;#other-consult-packages&quot;&gt;¶&lt;/a&gt;Other Consult packages&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/gagbo/consult-lsp&quot;&gt;lsp-mode interface for Consult&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/SebastienWae/app-launcher&quot;&gt;App launching like counsel-linux-app with app-launcher&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;a id=&quot;other-resources&quot; class=&quot;anchor&quot; href=&quot;#other-resources&quot;&gt;¶&lt;/a&gt;Other resources&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/minad/consult/wiki&quot;&gt;The Consult wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/minad/consult/issues/6&quot;&gt;Consult command wishlist&lt;/a&gt; - has some good pointers on where to find replacement functionality&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;&lt;a id=&quot;emacs-news&quot; class=&quot;anchor&quot; href=&quot;#emacs-news&quot;&gt;¶&lt;/a&gt;Emacs News&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/minad/affe&quot;&gt;New package: minad/affe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.reddit.com/r/emacs/comments/n9ts4j/gccemacs_prebuilt_package_on_windows_10/&quot;&gt;Prebuilt Emacs 28 package for Windows with native compilation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.philnewton.net/blog/bug-reference-config-org-mode/&quot;&gt;Configuring bug-reference-mode from within org-mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nyxt.atlas.engineer/article/release-2.0.0.org&quot;&gt;Nyxt 2.0 released&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</div></div></div></div>&lt;footer class=&quot;blog-footer&quot;&gt;&lt;div class=&quot;container&quot;&gt;&lt;div class=&quot;row&quot;&gt;&lt;div class=&quot;col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right&quot;&gt;&lt;p&gt;Made with Emacs 27.2 (Org mode 9.4.4)&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://systemcrafters.net/privacy-policy/&quot;&gt;Privacy Policy&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/footer&gt;&lt;script src=&quot;/js/bootstrap.bundle.min.js&quot;/&gt;</body></html>
