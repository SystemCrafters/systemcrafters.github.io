<!DOCTYPE html><html lang="en"><head><!--  --><meta charset="utf-8"/><meta author="David Wilson"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/fonts/iosevka-aile/iosevka-aile.css"/><link rel="stylesheet" href="/fonts/jetbrains-mono/jetbrains-mono.css"/><link rel="stylesheet" href="/css/code.css"/><link rel="stylesheet" href="/css/site.css"/><script defer="defer" data-domain="systemcrafters.org" src="https://plausible.io/js/plausible.js"></script><title>System Crafters Live! - July 16, 2021 - System Crafters</title></head><body><div><div class="blog-header"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-8"><div class="blog-title">System Crafters</div></div><div class="col-sm col-md"><div class="blog-description text-sm-left text-md-right text-lg-right text-xl-right"></div></div></div></div></div><div class="blog-masthead"><div class="container"><div class="row align-items-center justify-content-between"><div class="col-sm-12 col-md-12"><nav class="nav"><a class="nav-link" href="/">Home</a> <a class="nav-link" href="/videos">Videos</a><a class="nav-link" href="https://wiki.systemcrafters.cc">Wiki</a> <a class="nav-link" href="/support-the-channel">Support The Channel</a></nav></div></div></div></div></div><div class="container"><div class="row"><div class="col-sm-12 blog-main"><div class="blog-post"><h1 class="blog-post-title">System Crafters Live! - July 16, 2021</h1><p class="blog-post-meta"></p><div>
<h2><a id="do-we-really-need-use-package" class="anchor" href="#do-we-really-need-use-package">¶</a>Do we really need use-package?</h2><p><kbd>use-package</kbd> is a (very?) commonly used package for writing one's Emacs configuration in a more "concise" way.  It provides a macro called <kbd>use-package</kbd> which removes some boilerplate needed in Emacs configs.
</p>

<p>If you followed my Emacs From Scratch series, you're probably using it!
</p>

<p>I've been experimenting with a new configuration lately which doesn't use <kbd>use-package</kbd>.  Why?
</p>

<h2><a id="the-value-of-use-package" class="anchor" href="#the-value-of-use-package">¶</a>The value of use-package</h2><p><kbd>use-package</kbd> certainly provides some useful features:
</p>

<ul><li>It can make your configuration <strong>appear</strong> more concise and well-organized</li>
<li>Installs external packages when necessary</li>
<li>Streamlined configuration of key bindings, hooks, faces, and custom variables</li>
<li>Can set up "autoloads" for commands that don't already have them</li>
<li>Makes <kbd>init.el</kbd> look more like a configuration file syntax instead of code, more beginner friendly?</li>
</ul>

<p>What else?
</p>

<h2><a id="the-downsides-of-use-package" class="anchor" href="#the-downsides-of-use-package">¶</a>The downsides of use-package</h2><p>In my opinion, there are a few downsides to using <kbd>use-package</kbd>, especially for new Emacs users:
</p>

<ul><li>Obscures the underlying Emacs Lisp code for configuration by providing a different syntax that must be learned</li>
<li>Encourages you to cram all the config for a package inside of one expression</li>
<li><kbd>:init</kbd> vs <kbd>:config</kbd> is confusing to new users</li>
<li>Harder to really understand when packages will be loaded</li>
</ul>

<p>With all that said, I'm not recommending that people get rid of <kbd>use-package</kbd>!
</p>

<p>This conversation is mainly an exercise to make us think critically about what it provides and look at that the equivalent Emacs Lisp would be.
</p>

<h2><a id="what-does-use-package-really-do" class="anchor" href="#what-does-use-package-really-do">¶</a>What does use-package really do?</h2><p>I mentioned before that <kbd>use-package</kbd> is a macro, but what does that mean?
</p>

<p>In Lisp languages, a macro can be thought of like a "code template" which is defined like a function but operates slightly differently.
</p>

<p>Instead of the arguments to the macro "function" being evaluated and then passed in, the arguments are <strong>not</strong> evaluated.  The body of the macro "function" returns the <em>real</em> code that should be executed instead!
</p>

<p>We can use <kbd>M-x emacs-lisp-macroexpand</kbd> with the cursor before a macro call to expand it into the resulting forms.  We'll use this in the Emacs From Scratch configuration to understand what <kbd>use-package</kbd> does and then convert it to plain Emacs Lisp!
</p>

<h3><a id="features-to-investigate" class="anchor" href="#features-to-investigate">¶</a>Features to investigate</h3><ul><li><kbd>:ensure t</kbd></li>
<li><kbd>:after</kbd></li>
<li><kbd>:config</kbd> and <kbd>:init</kbd></li>
<li><kbd>:custom</kbd> (use <kbd>custom-set-variables</kbd>?)</li>
<li><kbd>:defer</kbd></li>
<li><kbd>:bind</kbd></li>
<li><kbd>:hook</kbd></li>
<li><kbd>:commands</kbd></li>
<li><kbd>:mode</kbd></li>
</ul>

<h2><a id="what-would-we-need-in-emacs" class="anchor" href="#what-would-we-need-in-emacs">¶</a>What would we need in Emacs?</h2><p>I think that with some additional built-in helpers in Emacs, packages like <kbd>use-package</kbd> would be less necessary:
</p>

<ul><li>A macro for defining multiple keys more easily</li>
<li>A macro (or optional args to <kbd>add-hook</kbd>) for adding multiple hooks more easily</li>
<li>A macro for setting custom variables</li>
</ul>

<p>Take a look at leaf: <a href="https://github.com/conao3/leaf.el">https://github.com/conao3/leaf.el</a>
</p>
</div></div></div></div></div><footer class="blog-footer"><div class="container"><div class="row"><div class="col-sm col-md text-sm-left text-md-right text-lg-right text-xl-right"><p>Made with Emacs 27.2 (Org mode 9.4.4)</p><p><a href="privacy-policy/">Privacy Policy</a></p></div></div></div></footer><script src="/js/bootstrap.bundle.min.js"/></body></html>
